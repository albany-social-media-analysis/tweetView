{% extends "includes/loginBase.html" %}

{% block contents %}
{% from "includes/_formhelpers.html" import render_field %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
        {% for alert in messages %}
              <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                {{ alert }}
              </div>
        {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% if (type != 'usr') and (type != 'pwd') %}
    <div class="jumbotron text-center container">
      <h1>Forgot something?</h1>
      <p class="lead">Choose the login information type you need to retreive</p>
    </div>
    <div class="text-center">
        <form class="form-group" action="{{ url_for('retrieve_cred') }}" method="post">
          {{ render_field(form.retrieval_type, class_="form-control") }}
          {{ render_field(form.submit) }}
        </form>
    </div>
{% else %}
  {% if type == 'usr' %}
    <div class="jumbotron text-center container">
      <h1>Forgot Your User Name?</h1>
      <p class="lead"> Enter your email for this platform</p>
      <p class="lead"> An email containing your login information will be sent
        to the email address associated with your account </p>
    </div>
    <div class="text-center">
        <form class="form-group" method="post" action="{{ url_for('retrieve_cred') }}">
          {{ render_field(form.user_email, class_="form-control") }}
          {{ render_field(form.submit) }}
        </form>
    </div>
  {% elif type == 'pwd'%}
    <div class="jumbotron text-center container">
      <h1>Forgot Your Password?</h1>
      <p class="lead">Enter the user name and email associated with your account</p>
      <p class="lead">An email will be sent with your login information associated
      with your account</p>
    </div>
    <div class="text-center">
        <form class="form-group" method="post" action="{{ url_for('retrieve_cred') }}">
          {{ render_field(form.forgot_user_name, class_="form-control") }}
          {{ render_field(form.user_email, class_="form-control") }}
          {{ render_field(form.submit) }}
        </form>
    </div>
  {% endif %}
{% endif %}

{% endblock %}
